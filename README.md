# FSD plugin

## Команды проекта

Установка зависимостей

`npm run i`

Сборка в режиме разработки

`npm run dev`

Сборка в режиме продакшена

`npm run build`

Запуск линтера 

`npm run lint`

## Использование плагина

С параметрами по умолчанию:

```
$(#slider).slider()
```

С заданием необходимых параметров:

```
$(#slider).slider({
  minValue: 0,
  maxValue: 50,
  step: 2,
  isVertical: true,
})
````

Список всех возможных параметров:

| Параметр          | Тип                | Значение по умолчанию | Описание                                                                                        |
|-------------------|--------------------|-----------------------|-------------------------------------------------------------------------------------------------|
| minValue          | number             | 0                     | Минимальное значение слайдера                                                                   |
| maxValue          | number             | 100                   | Максимальное значение слайдера                                                                  |
| step              | number             | 1                     | Шаг значений                                                                                    |
| value             | number \| number[] | 50                    | Стартовое значение слайдера, при указании массива из 2 чисел будет создан слайдер с 2 бегунками |
| scaleOptionsNum   | number             | 5                     | Количество интерактивных меток под слайдером                                                    |
| isTooltipDisabled | boolean            | false                 | Определяет, включен или нет элемент с цифрой над бегунком                                       |
| isVertical        | boolean            | false                 | Определяет направление слайдера (горизонтальное/вертикальное)                                   |

## API плагина

После инициализации плагина можно использовать несколько методов для взаимодействия с ним. Для этого необходимо вместо опций передать в слайдер название метода первым аргументом, а параметры - после него.

* update(newOptions: object)

  Позволяет обновить настройки слайдера

  ```
  
  $(#slider).slider('update', {
    isVertical: true    // Изменяет направление слайдера
  })

  ```

* updateValue(value: number | number[])

    Выделенный метод updateValue позволяет обновить только значение слайдера с сохранением остальных настроек

  ```
  
  $(#slider).slider('updateValue', 90)

  ```

* getValue(): number | number[]

  Возвращает текущее значение слайдера

  ```
  
  $(#slider).slider('getValue')

  ```

* onValueChange(callback: Function)

  Позволяет задать коллбэк, который выполнится при изменении значения слайдера

  ```
  
  $(#slider).slider('onValueChange', () => {
    console.log('Значение изменилось');
  })

  ```


## Архитектура

Плагин  спроектирован на основе паттерна MVС. Модель (класс Model) содержит логику по обновлению состояния слайдера и предоставляет текущее значение. Представление (класс View) основано на классах-представлениях различных элементов слайдера. Представление отвечает за внешний вид слайдера, обновляет его отображение на основе полученных извне данных, причем каждый подкласс (subview) отвечает за свою часть отображения. Контроллер (класс Controller) связывает Модель и Представление при помощи коллбэков, позволяя таким образом каждому из классов узнавать об изменении другого.


### Отвязывание слоев приложения

Каждая сущность не знает ничего о других сущностях, т.к. все параметры, необходимые для создания и функционирования она получает из объекта при инициализации класса. При любых изменениях компонент запускает коллбэки, переданные снаружи (причем неважно, какая сущность передает их в текущий компонент, поэтому связывания слоев не происходит)

### Передача данных вниз-вверх по слоям приложения

Передача данных вниз по слоям осуществляется в момент инициализации соответствующих классов, данные передаются через объект в конструктор дочернего класса. Например, для многоуровневого представления передача данных на более низкие уровни (subviews) происходит при инициализации этих классов основным классом представления View.

Передача данных на более высокие слои приложения осуществляется при помощи коллбэков, которые определяются в корневых слоях (класс Controller) и передаются вниз через слои до низкоуровневых слоев, в которых происходит вызов данных функций. Например, коллбэк для обработки изменения значения при клике на трек слайдера определяется в классе Controller и при вызове устанавливает в модель новое значение слайдера, далее данная функция передается на нижний уровень (subview-класс BarView), в котором вызывается с аргументом, полученным на нижнем уровне.

### UML-диаграмма классов

![UML-диаграмма](https://i.imgur.com/3tkT62K.png)
